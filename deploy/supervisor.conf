# CONFIGURAÇÃO SUPERVISOR - SOCRATES ONLINE
# Arquivo: /etc/supervisor/conf.d/socrates.conf

[program:socrates]
command=/home/socrates/socrates_online/venv/bin/gunicorn -c /home/socrates/socrates_online/deploy/gunicorn.conf.py app:app
directory=/home/socrates/socrates_online
user=socrates
group=socrates
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/home/socrates/socrates_online/logs/supervisor.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/home/socrates/socrates_online/logs/supervisor_error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10

# Environment variables
environment=
    FLASK_ENV="production",
    FLASK_APP="app.py",
    PATH="/home/socrates/socrates_online/venv/bin:%(ENV_PATH)s"

# Process management
startretries=3
startsecs=10
stopwaitsecs=30
killasgroup=true
stopasgroup=true

# Logging
loglevel=info

# Priority (lower numbers start first)
priority=100 